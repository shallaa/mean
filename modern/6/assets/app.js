angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$scope",function(t){t.$on("login",function(e,n){t.currentUser=n})}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc",function(t,e){t.login=function(t,n){e.login(t,n).then(function(t){$$scope.$emit("login",t.data)})}}]),angular.module("app").controller("PostsCtrl",["$scope","PostSvc",function(t,e){t.addPost=function(){t.postBody&&e.create({username:"shallaa",body:t.postBody}).success(function(e){t.posts.unshift(e),t.postBody=null})},e.fetch().success(function(e){t.posts=e})}]),angular.module("app").service("PostSvc",["$http",function(t){this.fetch=function(){return t.get("/api/posts")},this.create=function(e){return t.post("/api/posts",e)}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc","$location",function(t,e,n){t.register=function(o,r){e.register(o,r).then(function(e){t.$emit("login",e),n.path("/")})}}]),angular.module("app").config(["$routeProvider",function(t){t.when("/",{controller:"PostsCtrl",templateUrl:"/templates/posts.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"/templates/register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"/templates/login.html"})}]),angular.module("app").service("UserSvc",["$http",function(t){var e=this;e.getUser=function(){return t.get("/api/users")},e.login=function(n,o){return t.post("/api/sessions",{username:n,password:o}).then(function(n){return e.token=n.data,t.defaults.headers.common["X-Auth"]=n.data,e.getUser()})},e.register=function(n,o){return t.post("/api/users",{username:n,password:o}).then(function(){return e.login(n,o)})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwicG9zdHMuY3RybC5qcyIsInBvc3RzLnN2Yy5qcyIsInJlZ2lzdGVyLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJ1c2VyLnN2Yy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRvbiIsIl8iLCJ1c2VyIiwiY3VycmVudFVzZXIiLCJVc2VyU3ZjIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwidGhlbiIsInJlc3BvbnNlIiwiJCRzY29wZSIsIiRlbWl0IiwiZGF0YSIsIlBvc3RTdmMiLCJhZGRQb3N0IiwicG9zdEJvZHkiLCJjcmVhdGUiLCJib2R5Iiwic3VjY2VzcyIsInBvc3QiLCJwb3N0cyIsInVuc2hpZnQiLCJmZXRjaCIsInNlcnZpY2UiLCIkaHR0cCIsInRoaXMiLCJnZXQiLCIkbG9jYXRpb24iLCJyZWdpc3RlciIsInBhdGgiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsInN2YyIsImdldFVzZXIiLCJ2YWwiLCJ0b2tlbiIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiJdLCJtYXBwaW5ncyI6IkFBR0FBLFFBQUFDLE9BQUEsT0FDQSxZQ0pBRCxRQUFBQyxPQUFBLE9BQUFDLFdBQUEsbUJBQUEsU0FBQSxTQUFBQyxHQUNBQSxFQUFBQyxJQUFBLFFBQUEsU0FBQUMsRUFBQUMsR0FDQUgsRUFBQUksWUFBQUQsT0NDQU4sUUFBQUMsT0FBQSxPQUFBQyxXQUFBLGFBQUEsU0FBQSxVQUFBLFNBQUFDLEVBQUFLLEdBQ0FMLEVBQUFNLE1BQUEsU0FBQUMsRUFBQUMsR0FDQUgsRUFBQUMsTUFBQUMsRUFBQUMsR0FBQUMsS0FBQSxTQUFBQyxHQUNBQyxRQUFBQyxNQUFBLFFBQUFGLEVBQUFHLFlDSEFoQixRQUFBQyxPQUFBLE9BQUFDLFdBQUEsYUFBQSxTQUFBLFVBQUEsU0FBQUMsRUFBQWMsR0FDQWQsRUFBQWUsUUFBQSxXQUNBZixFQUFBZ0IsVUFDQUYsRUFBQUcsUUFBQVYsU0FBQSxVQUFBVyxLQUFBbEIsRUFBQWdCLFdBQUFHLFFBQUEsU0FBQUMsR0FDQXBCLEVBQUFxQixNQUFBQyxRQUFBRixHQUNBcEIsRUFBQWdCLFNBQUEsUUFLQUYsRUFBQVMsUUFBQUosUUFBQSxTQUFBRSxHQUNBckIsRUFBQXFCLE1BQUFBLE9DWEF4QixRQUFBQyxPQUFBLE9BQUEwQixRQUFBLFdBQUEsUUFBQSxTQUFBQyxHQUNBQyxLQUFBSCxNQUFBLFdBQ0EsTUFBQUUsR0FBQUUsSUFBQSxlQUdBRCxLQUFBVCxPQUFBLFNBQUFHLEdBQ0EsTUFBQUssR0FBQUwsS0FBQSxhQUFBQSxPQ1RBdkIsUUFBQUMsT0FBQSxPQUFBQyxXQUFBLGdCQUFBLFNBQUEsVUFBQSxZQUFBLFNBQUFDLEVBQUFLLEVBQUF1QixHQUNBNUIsRUFBQTZCLFNBQUEsU0FBQXRCLEVBQUFDLEdBQ0FILEVBQUF3QixTQUFBdEIsRUFBQUMsR0FBQUMsS0FBQSxTQUFBTixHQUNBSCxFQUFBWSxNQUFBLFFBQUFULEdBQ0F5QixFQUFBRSxLQUFBLFdDREFqQyxRQUFBQyxPQUFBLE9BQUFpQyxRQUFBLGlCQUFBLFNBQUFDLEdBQ0FBLEVBQ0FDLEtBQUEsS0FBQWxDLFdBQUEsWUFBQW1DLFlBQUEsMEJBQ0FELEtBQUEsYUFBQWxDLFdBQUEsZUFBQW1DLFlBQUEsNkJBQ0FELEtBQUEsVUFBQWxDLFdBQUEsWUFBQW1DLFlBQUEsNkJDSkFyQyxRQUFBQyxPQUFBLE9BQUEwQixRQUFBLFdBQUEsUUFBQSxTQUFBQyxHQUNBLEdBQUFVLEdBQUFULElBRUFTLEdBQUFDLFFBQUEsV0FDQSxNQUFBWCxHQUFBRSxJQUFBLGVBR0FRLEVBQUE3QixNQUFBLFNBQUFDLEVBQUFDLEdBQ0EsTUFBQWlCLEdBQUFMLEtBQUEsaUJBQUFiLFNBQUFBLEVBQUFDLFNBQUFBLElBQUFDLEtBQUEsU0FBQTRCLEdBR0EsTUFGQUYsR0FBQUcsTUFBQUQsRUFBQXhCLEtBQ0FZLEVBQUFjLFNBQUFDLFFBQUFDLE9BQUEsVUFBQUosRUFBQXhCLEtBQ0FzQixFQUFBQyxhQUlBRCxFQUFBTixTQUFBLFNBQUF0QixFQUFBQyxHQUNBLE1BQUFpQixHQUFBTCxLQUFBLGNBQUFiLFNBQUFBLEVBQUFDLFNBQUFBLElBQUFDLEtBQUEsV0FDQSxNQUFBMEIsR0FBQTdCLE1BQUFDLEVBQUFDIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEp1bkhvIG9uIDIwMTUtMDQtMjguXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSggJ2FwcCcsIFtcclxuICAgICduZ1JvdXRlJ1xyXG5dICk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoICdBcHBsaWNhdGlvbkN0cmwnLCBmdW5jdGlvbigkc2NvcGUpe1xyXG5cdCRzY29wZS4kb24oICdsb2dpbicsIGZ1bmN0aW9uKCBfLCB1c2VyICl7XHJcblx0XHQkc2NvcGUuY3VycmVudFVzZXIgPSB1c2VyO1xyXG5cdH0gKTtcclxufSApOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEp1bkhvIG9uIDIwMTUtMDQtMjguXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlciggJ0xvZ2luQ3RybCcsIGZ1bmN0aW9uKCAkc2NvcGUsIFVzZXJTdmMgKXtcclxuICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKCB1c2VybmFtZSwgcGFzc3dvcmQgKXtcclxuICAgICAgICBVc2VyU3ZjLmxvZ2luKCB1c2VybmFtZSwgcGFzc3dvcmQpLnRoZW4oIGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICAgICAgJCRzY29wZS4kZW1pdCggJ2xvZ2luJywgcmVzcG9uc2UuZGF0YSApO1xyXG4gICAgICAgIH0gKTtcclxuICAgIH07XHJcbn0gKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKdW5IbyBvbiAyMDE1LTA0LTI4LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoICdQb3N0c0N0cmwnLCBmdW5jdGlvbiggJHNjb3BlLCBQb3N0U3ZjICl7XHJcbiAgICAkc2NvcGUuYWRkUG9zdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYoICRzY29wZS5wb3N0Qm9keSApe1xyXG4gICAgICAgICAgICBQb3N0U3ZjLmNyZWF0ZSh7dXNlcm5hbWU6J3NoYWxsYWEnLCBib2R5OiRzY29wZS5wb3N0Qm9keX0pLnN1Y2Nlc3MoIGZ1bmN0aW9uKHBvc3Qpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBvc3RzLnVuc2hpZnQocG9zdCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucG9zdEJvZHkgPSBudWxsO1xyXG4gICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBQb3N0U3ZjLmZldGNoKCkuc3VjY2VzcyggZnVuY3Rpb24ocG9zdHMpe1xyXG4gICAgICAgICRzY29wZS5wb3N0cyA9IHBvc3RzO1xyXG4gICAgfSApO1xyXG59ICk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSnVuSG8gb24gMjAxNS0wNC0yOC5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKS5zZXJ2aWNlKCAnUG9zdFN2YycsIGZ1bmN0aW9uKCRodHRwKXtcclxuICAgIHRoaXMuZmV0Y2ggPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcG9zdHMnKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jcmVhdGUgPSBmdW5jdGlvbihwb3N0KXtcclxuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCggJy9hcGkvcG9zdHMnLCBwb3N0ICk7XHJcbiAgICB9O1xyXG59ICk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoICdSZWdpc3RlckN0cmwnLCBmdW5jdGlvbiggJHNjb3BlLCBVc2VyU3ZjLCAkbG9jYXRpb24gKXtcclxuXHQkc2NvcGUucmVnaXN0ZXIgPSBmdW5jdGlvbiggdXNlcm5hbWUsIHBhc3N3b3JkICl7XHJcblx0XHRVc2VyU3ZjLnJlZ2lzdGVyKCB1c2VybmFtZSwgcGFzc3dvcmQgKS50aGVuKCBmdW5jdGlvbih1c2VyKXtcclxuXHRcdFx0JHNjb3BlLiRlbWl0KCAnbG9naW4nLCB1c2VyICk7XHJcblx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XHJcblx0XHR9ICk7XHJcblx0fTtcclxufSApOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEp1bkhvIG9uIDIwMTUtMDQtMjguXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJykuY29uZmlnKCBmdW5jdGlvbigkcm91dGVQcm92aWRlcil7XHJcbiAgICAkcm91dGVQcm92aWRlclxyXG4gICAgICAgIC53aGVuKCAnLycsIHtjb250cm9sbGVyOidQb3N0c0N0cmwnLCB0ZW1wbGF0ZVVybDonL3RlbXBsYXRlcy9wb3N0cy5odG1sJ30gKVxyXG4gICAgICAgIC53aGVuKCAnL3JlZ2lzdGVyJywge2NvbnRyb2xsZXI6J1JlZ2lzdGVyQ3RybCcsIHRlbXBsYXRlVXJsOicvdGVtcGxhdGVzL3JlZ2lzdGVyLmh0bWwnfSApXHJcbiAgICAgICAgLndoZW4oICcvbG9naW4nLCB7Y29udHJvbGxlcjonTG9naW5DdHJsJywgdGVtcGxhdGVVcmw6Jy90ZW1wbGF0ZXMvbG9naW4uaHRtbCd9KTtcclxufSApOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEp1bkhvIG9uIDIwMTUtMDQtMjguXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJykuc2VydmljZSggJ1VzZXJTdmMnLCBmdW5jdGlvbigkaHR0cCl7XHJcbiAgICB2YXIgc3ZjID0gdGhpcztcclxuXHJcbiAgICBzdmMuZ2V0VXNlciA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VycycpO1xyXG4gICAgfTtcclxuXHJcbiAgICBzdmMubG9naW4gPSBmdW5jdGlvbiggdXNlcm5hbWUsIHBhc3N3b3JkICl7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoICcvYXBpL3Nlc3Npb25zJywge3VzZXJuYW1lOnVzZXJuYW1lLCBwYXNzd29yZDpwYXNzd29yZH0pLnRoZW4oIGZ1bmN0aW9uKHZhbCl7XHJcbiAgICAgICAgICAgIHN2Yy50b2tlbiA9IHZhbC5kYXRhO1xyXG4gICAgICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1BdXRoJ10gPSB2YWwuZGF0YTtcclxuICAgICAgICAgICAgcmV0dXJuIHN2Yy5nZXRVc2VyKCk7XHJcbiAgICAgICAgfSApO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgc3ZjLnJlZ2lzdGVyID0gZnVuY3Rpb24oIHVzZXJuYW1lLCBwYXNzd29yZCApe1xyXG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCAnL2FwaS91c2VycycsIHt1c2VybmFtZTp1c2VybmFtZSwgcGFzc3dvcmQ6cGFzc3dvcmR9ICkudGhlbiggZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIHN2Yy5sb2dpbiggdXNlcm5hbWUsIHBhc3N3b3JkICk7XHJcbiAgICAgICAgfSApO1xyXG4gICAgfTtcclxufSApOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==